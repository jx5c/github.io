okay welcome back and that we continue to discuss the hash and here we want to discuss one thing which is called keyed hash actually the key hash is also mentioned in the video we post earlier ok so so far what we have shown is we have a file f you just hash it what is the key to hash a kid hash is the file is hash together with the key so not only with the fire itself but some secret key for example let's say we have two persons Alice and Bob and the both of them know a secret key K and of course to make the image complete we needed to have a bad guy we call em which is stands for malicious m does not have the key K okay so Alice will send out a file F to Bob and she wants to make sure that during the transmission the file is not changed so Alice will attach some integrity thing some integrity protection after the file please notice that here we say the content of the file is not confidential so Alice doesn't care about other people seeing the file but Alice does care about whether or not Bob received the corrected file so what Alice will do is oh i hash the file and attach it so now when Barbara saved the whole packet Bob will see oh this is from Alice this is for me she sent me a file and this is the hash without of the file so I received the file a hatchet and compared to the hash without Alex delivers if they're the same I receive the corrected file so let's see we have a bad guy M who try to impersonate try to impersonate Alice okay so what this is what M will do M will said oh I'm Alice well Alice is in clear text so you can claim yourself to be whoever if you want to kill yourself to be President Obama you can do that and Mallory will generate a fake file called F M this is a fake file and of course based on the format the Mallory needed to attach an integrity protection remember the hash function is a public hash function which basically means everybody knows both Alice and the bad guy knows so now the bad guy will generate a fake package that I'm Alice and this is for Bob this is my fake file and this is the hatch without of the fake file can Bob figure out is there anything wrong no Bob cannot okay not and that's why we needed a key - a key to hash is not a separate hash function so we're still using the standard hash function but on the contrary on the contrary we are changing the way that the hash value is generated so that it becomes harder for the bad guy to compromise so actually here in the video they have mentioned in the video posted earlier they have mentioned how to generate a key hash so we're going to use that format they have recommend so now we have file and then your hash K concatenated with hash K and again so here you has twice first you concatenated a file with the secret key that Alice knows generate a hash result and the concatenated came with the hash result again and hash again and a Senator Bob okay so now let's see what m can do first and we'll say oh I'm still Alice I want to him I'm Alice I want to send it to a Bob this is my file F M so now she faced a problem she needed to generate a fake hash without remember this fake hash result is jointly determined by the file F and also a secret key K which only known to Alice and the Bob so can am generated a fake hash result no she will not be able to so in this way the keyed hash can provide some extra protection okay so let's step back step back one step and see what we can actually do so let me write down the two message we just a right we just a show okay so there are two message one is f so the first and format contain the file F and the hash read out of F the second is F hash K hash K with that okay so now let's see what type of attack can this two message defend against okay so in the first format so god forbid so let's say we have a transmission link and the link is arrow prone it's AeroPro so it's possible that some random arrow will happen what does a random arrow means so you are sending F so let's say one bit in F changes one bit in have changed so in original file the bit is zero and somehow because of the unreliable communication link it become one okay and if this is the problem the receiver will be able to detect the reason is now you have F and there's one bit change it and now if I have shipped there will be a big difference between the hash result I generate and the hash without you transmit so I can easily figure out there is something wrong can we figure out oh it's you know some change in the file or assumption in the hash without we probably cannot tell the difference but we know there is something wrong so now let's look at the second one the second one can the second one handle random arrow yes with T okay why if there is something change in the file F this will change in the hash will change so random arrow we can still handle what about intention is this the correct spelling what about intentional change in other words we have some bad guy who try to manipulate the file who try to manipulate the file can this defend against this intentional manipulation it cannot why if the bad guy change from F to F M since the hash function is public the bad guy will also hatch the new file and change the whole compact the whole foot packet on the contrary if the bad guy changed the file F 2 F M here since the bad guy does not know the secret key K he will not be able to hash this so in this way the second format can defend against the both random arrow and those intentional change so what's the difficulty the difficulty is now the two sides needed to establish a secret key K okay and very frequently very frequently in the internet you are going to see something called very frequently in the internet protocols you see something called a Mac this is actually message I'll send the occasion coat and a mic is most of time it's a key to hash it out so make sure you don't confuse this Mac with this medium access control the second layer in the Union Network protocol okay so this basically showed that the key to hash okay  
